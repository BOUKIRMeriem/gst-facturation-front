<form novalidate>
  <div class="modal-header">
    <h5>{{title}}</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="digital-add needs-validation">
      <form [formGroup]="paymentForm" *ngIf="paymentForm" (ngSubmit)="savePayment()" novalidate>
        <div class="form-group row">
        <div class="col-xl-2">
          <label for="date" class="col-form-label"><span>*</span>
            Date :</label>
          <input class="form-control" id="date" type="date" required="" formControlName="date">
          <div *ngIf="date.invalid && (date.touched || date.dirty)" class="text text-danger">
            <div *ngIf="date.errors?.required">
              La Date est obligatoire.
            </div>
          </div>
        </div>
          <div class="col-sm-3">
            <label class="col-form-label"><span>*</span>
              Type :</label><br/>
            <p-dropdown
              [options]="types"
              optionLabel="name"
              [style]="{'width':'100%'}"
              [filter]="false"
              filterBy="name"
              [showClear]="true"
              placeholder="Sélectionner type"
              formControlName="type"
              optionValue="code"
              (onChange)="onTypeSelect($event)">
              <ng-template let-cli pTemplate="item">
                <div class="country-item">
                  <div>{{ cli.name }}</div>
                </div>
              </ng-template>
            </p-dropdown>
          </div>
        <div class="col-xl-4">
          <label for="designation" class="col-form-label"><span>*</span>
            Description :</label>
          <input class="form-control" id="designation" type="text" formControlName="designation">
          <div *ngIf="designation.invalid && (designation.touched || designation.dirty)" class="text text-danger">

            <div *ngIf="designation.errors?.required">
              Description est obligatoire.
            </div>
          </div>
        </div>
      </div>
        <div class="form-group row">
          <div class="col-xl-2" *ngIf="isCheque">
            <label for="deadline" class="col-form-label">
              Echéance :</label>
            <input class="form-control" id="deadline" type="date" formControlName="deadline">
          </div>
          <div class="col-sm-2" *ngIf="isCheque">
            <label class="col-form-label">
              Banque :</label>
            <input class="form-control" id="bank" type="text"formControlName="bank">
          </div>
          <div class="col-xl-4" *ngIf="isCheque">
            <label for="tier" class="col-form-label">
              Tier :</label>
            <input class="form-control" id="tier" type="text" formControlName="tier">
          </div>
          <div class="col-xl-3">
            <label for="amount" class="col-form-label">
              Montant :</label><br/>
            <p-inputNumber mode="decimal" [minFractionDigits]="2" [maxFractionDigits]="2"
                           formControlName="amount" id="amount" inputStyleClass="bg-red">
            </p-inputNumber>
          </div>
        </div>

        <div class="form-group mb-0">
          <div class="product-buttons text-center">
            <button type="submit" class="btn btn-primary mr-1">Enregistrer</button>&nbsp;&nbsp;
            <button type="button" (click)="clearValues()" class="btn btn-light">Annuler</button>
          </div>
        </div><br/>
      </form>
        <p-table #dt2 [value]="listPayment" styleClass="p-datatable-sm" selectionMode="multiple" [metaKeySelection]="true"
                [lazy]="true" responsiveLayout="scroll" [rowHover]="true" dataKey="id" [resizableColumns]="true"
                 [autoLayout]="true" [showCurrentPageReport]="true" >
        <ng-template pTemplate="header">
          <tr style="font-size: 14px;">
            <th *ngFor="let col of atrPayment" pSortableColumn="{{col.field}}"
                [style.width]="col.width">
              {{col.header}}
            </th>
            <th style="width: 6rem">Action</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-mat>
          <tr sstyle="height: 2rem;font-size: 14px;" (dblclick)="onClickEditPayment(mat)">
            <td *ngIf="mat.verified">v</td>
            <td *ngIf="!mat.verified">0</td>
            <td>{{mat.date | date: 'dd/MM/yyyy'}}</td>
            <td>{{mat.designation}}</td>
            <td>{{getTypeName(mat.type)}}</td>
            <td style="text-align:right;">{{mat.amount | number : '1.2-2' | removeComma}}</td>
            <td>
              <a href="javascript:;" *ngIf="!mat.verified" (click)="onClickVerifiedPayment(mat)"
                 title="Valider" class="text text-success"><i class="fa fa-check"></i>&nbsp;|&nbsp;</a>
              <a  href="javascript:;" *ngIf="mat.verified" (click)="onClickUnVerifiedPayment(mat)"
                  title="Devalider" class="text text-primary"><i
                class="fa fa-check-square-o"></i>&nbsp;|&nbsp;</a><a href="javascript:;" (click)="onClickEditPayment(mat)" title="Modifier"
                   class="text text-warning"><i class="fa fa-edit"></i>&nbsp;|&nbsp;</a>
              <a  (click)="onClickDeletePayment(mat.id)"  title="Supprimer" href="javascript:;" class="text text-danger"><i
                class="fa fa-trash"></i></a>
            </td>

          </tr>
        </ng-template>

      </p-table>

    </div>
  </div>
</form>
