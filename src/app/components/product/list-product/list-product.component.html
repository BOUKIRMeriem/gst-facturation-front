<p-toast></p-toast>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card tab2-card">
                <div class="card-body">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        <span class="p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" style="width: 100%;"(input)="dt2.filterGlobal($event.target.value, 'contains')"
                                placeholder="Search..." />
                        </span>
                      <div style="float: right;">
                        <button class="btn btn-primary mr-1 mb-3" style="float: right;" (click)="addProduct()" >Ajouter un Produit</button>
                      </div>

                    </div><br/>
                    <div class="clearfix"></div>

                    <div class="card">


                        <p-table #dt2 [value]="listProducts" styleClass="p-datatable-sm" [rows]="20" [paginator]="true" [scrollable]="true" scrollHeight="700px"
                            [globalFilterFields]="['reference','name','sellingPrice','purchasePrice','totalQuantity']"
                            responsiveLayout="scroll" [rowHover]="true" dataKey="reference" [resizableColumns]="true"
                            [autoLayout]="true" >
                            <ng-template pTemplate="header">
                                <tr style="font-size: 14px;">
                                    <th *ngFor="let col of atrProduct" pSortableColumn="{{col.field}}"
                                        [style.width]="col.width" style="text-align: center">
                                        {{col.header}}
                                    </th>
                                  <th style="width: 2%"></th>
                                  <th style="width: 6%">Action</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr style="height: 25px;font-size: 14px;" (dblclick)="onClickEditProduct(product.id)">
                                  <td style="width: 7%">{{product.reference}}</td>
                                  <td style="width: 15%">{{product.name}}</td>
                                  <td style="text-align:right;width: 7%" [innerHTML]="product.sellingPrice != null ? (product.sellingPrice | number: '1.2-2' | removeComma) : '0,00'"></td>
                                  <td style="text-align:right;width: 7%" [innerHTML]="product.purchasePrice != null ? (product.purchasePrice | number: '1.2-2' | removeComma) : '0,00'"></td>
                                  <td style="text-align:right;width: 7%" [innerHTML]="product.departureQuantity | number: '1.2-2' | removeComma"></td>
                                  <td style="text-align:right;width: 7%" [innerHTML]="product.totalQuantity | number: '1.2-2' | removeComma"></td>
                                  <td style="width: 2%"></td>
                                  <td style="width: 6%">
                                    <a (click)="onClickEditProduct(product.id)" title="Modifier" href="javascript:;" class="text text-warning"><i
                                          class="fa fa-edit"></i>&nbsp;|&nbsp;</a>
                                    <a  (click)="setProductToDelete(product.id)" (click)="open(deleteModal)" href="javascript:;"
                                        class="text text-danger" title="Supprimer"><i class="fa fa-trash"></i></a>
                                  </td>
                                </tr>
                            </ng-template>

                        </p-table>
                        <ng-template #deleteModal let-modal>
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title f-w-600" id="myModal_delete_produit">Supprimer le Produit
                                    </h5>
                                </div>
                                <div class="modal-body">
                                    <div class="container" style="padding: 20px 20px;">
                                        <div style="text-align: center;margin-bottom: 15px;  ">
                                            <i class="fa fa-exclamation-triangle fa-5x"
                                                style="text-align: center; color: red;" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <h4 style="text-align: center;">
                                            Êtes-vous sûr?
                                        </h4>
                                    </div>
                                    <div style="text-align: center; color: whitesmoke; margin-bottom: 20px;">
                                        <p style="line-height:15px;">
                                            Voulez-vous vraiment supprimer cet enregistrement ? Ce processus ne peut pas être annulé.</p>
                                    </div>

                                </div>
                                <div class="modal-footer" style="text-align: center;">
                                    <button type="button" class="btn btn-primary" href="javascript:;" (click)="onClickDeleteProduct()"
                                        (click)="modal.dismiss('Cross click')">
                                        Supprimer
                                    </button>
                                    &nbsp;
                                    <button type="button" class="btn btn-secondary"
                                        (click)="modal.dismiss('Cross click')" href="javascript:;" data-dismiss="modal">
                                        Annuler
                                    </button>

                                </div>
                            </div>

                        </ng-template>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
